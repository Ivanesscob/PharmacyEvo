<Page x:Class="PharmacyEvo.Pages.CartPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      mc:Ignorable="d"
      Title="Корзина">

    <Grid>
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                <GradientStop Color="#FFF6F8FF" Offset="0"/>
                <GradientStop Color="#FFF7F7F7" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <Border Margin="22,18,22,22"
                CornerRadius="14"
                Background="White"
                BorderBrush="#FFE6E6E6"
                BorderThickness="1"
                Padding="18">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Button Content="Назад"
                        Height="34"
                        MinWidth="110"
                        HorizontalAlignment="Left"
                        Padding="12,5"
                        Background="#FFF3F4F6"
                        BorderBrush="#FFE5E7EB"
                        Foreground="#FF111827"
                        Click="BackButton_Click" />

                <TextBlock Grid.Row="1"
                           Text="Корзина"
                           FontSize="24"
                           FontWeight="SemiBold"
                           Foreground="#FF173A7A"
                           Margin="0,14,0,18"/>

                <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
                    <ItemsControl Name="CartItemsControl">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Margin="0,0,0,12"
                                        Background="#FFF9FAFB"
                                        BorderBrush="#FFE6E6E6"
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Padding="12">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <Border Grid.Column="0"
                                                Width="80"
                                                Height="80"
                                                Background="White"
                                                BorderBrush="#FFE2E8F0"
                                                BorderThickness="1"
                                                CornerRadius="6"
                                                Margin="0,0,12,0">
                                            <Image Source="{Binding ImageSource}"
                                                   Stretch="Uniform"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"/>
                                        </Border>

                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding Medicine.Name}"
                                                       FontSize="16"
                                                       FontWeight="SemiBold"
                                                       Foreground="#FF111827"
                                                       Margin="0,0,0,4"/>
                                            <TextBlock Text="{Binding PriceText}"
                                                       FontSize="14"
                                                       Foreground="#FF10B981"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="2"
                                                    Orientation="Horizontal"
                                                    VerticalAlignment="Center"
                                                    Margin="12,0,12,0">
                                            <Button Content="-"
                                                    Width="32"
                                                    Height="32"
                                                    Background="#FFF3F4F6"
                                                    BorderBrush="#FFE5E7EB"
                                                    Foreground="#FF111827"
                                                    Click="DecreaseQuantityButton_Click"
                                                    Tag="{Binding}"/>
                                            <TextBlock Text="{Binding Quantity}"
                                                       FontSize="16"
                                                       FontWeight="SemiBold"
                                                       Foreground="#FF111827"
                                                       VerticalAlignment="Center"
                                                       Margin="12,0,12,0"
                                                       MinWidth="30"
                                                       TextAlignment="Center"/>
                                            <Button Content="+"
                                                    Width="32"
                                                    Height="32"
                                                    Background="#FF10B981"
                                                    Foreground="White"
                                                    BorderThickness="0"
                                                    Click="IncreaseQuantityButton_Click"
                                                    Tag="{Binding}"/>
                                        </StackPanel>

                                        <TextBlock Grid.Column="3"
                                                   Text="{Binding TotalText}"
                                                   FontSize="16"
                                                   FontWeight="Bold"
                                                   Foreground="#FF173A7A"
                                                   VerticalAlignment="Center"
                                                   Margin="12,0,12,0"
                                                   MinWidth="100"
                                                   TextAlignment="Right"/>

                                        <Button Grid.Column="4"
                                                Content="Удалить"
                                                Height="32"
                                                MinWidth="80"
                                                Background="#FFDC2626"
                                                Foreground="White"
                                                BorderThickness="0"
                                                Click="RemoveItemButton_Click"
                                                Tag="{Binding}"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>

                <Border Grid.Row="3"
                        Margin="0,18,0,0"
                        Padding="18"
                        Background="#FFF9FAFB"
                        BorderBrush="#FFE6E6E6"
                        BorderThickness="1"
                        CornerRadius="8">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="Итого:"
                                       FontSize="18"
                                       FontWeight="SemiBold"
                                       Foreground="#FF111827"
                                       Margin="0,0,0,4"/>
                            <TextBlock Name="TotalPriceTextBlock"
                                       FontSize="24"
                                       FontWeight="Bold"
                                       Foreground="#FF10B981"/>
                        </StackPanel>
                        <Button Grid.Column="1"
                                Content="Оформить заказ"
                                Height="40"
                                MinWidth="150"
                                Background="#FF10B981"
                                Foreground="White"
                                BorderThickness="0"
                                Click="CheckoutButton_Click"/>
                    </Grid>
                </Border>
            </Grid>
        </Border>
    </Grid>
</Page>


